<div class="datepicker input-group-sm d-inline-block mb-3">
    <input type="text" id='min' class="form-control" placeholder='От'>
</div>
<div class="datepicker input-group-sm  d-inline-block mb-3">
    <input type="text" id='max' class="form-control d-inline-block" placeholder='До'>
</div>

<table class="table table-sm mx-auto table-bordered" id="table-transactions-list">
    <thead>
        <tr>
            <th scope="col" data-filterable>#</th>
            <th scope="col" data-filterable>Карта</th>
            <th scope="col" data-filterable>Клиент</th>
            <th scope="col" data-filterable>Станция</th>
            <th scope="col" data-filterable>Пост</th>
            <th scope="col" data-filterable>Время</th>
            <th scope="col" data-filterable>Сумма</th>
            <th scope="col" data-filterable>Инициатор</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>

<script>
$(document).ready(function(){

    $('#table-transactions-list thead tr').clone(true).appendTo( '#table-transactions-list thead' );
    $('#table-transactions-list thead tr:eq(1) th').each( function (i) {

        if ( $(this).data().hasOwnProperty("filterable") ) {
            var title = $(this).text();
            $(this).html( '<div class="input-group input-group-sm"><input class="form-control" type="text" placeholder="Найти '+title+'" /></div>' );
        } else {
            $(this).html(" ");
        }
    

        $( 'input', this ).on( 'keyup change', function () {
            if ( table.column(i).search() !== this.value ) {
                table
                    .column(i)
                    .search( this.value )
                    .draw();
            }
        } );
    } );

    

    var table = $("#table-transactions-list").DataTable({
        select: true,
        "order": [[ 0, "desc" ]],
        "language": {
            "lengthMenu": "_MENU_",
            "zeroRecords": "Ничего не найдено",
            "info": "Страниц: _PAGE_ из _PAGES_",
            "zeroRecords":    "Записей нет",
            "infoEmpty": "Не найдено",
            "infoFiltered": "(Поиск по _MAX_ записям)",
            "search" : "Фильтр",
            "paginate": {
                "first":      "Первая",
                "last":       "Последняя",
                "next":       "Следующая",
                "previous":   "Предыдущая"
            },
        },
        destroy: true,
        orderCellsTop: true,
        "serverSide": true,
        "ajax": {
            url: "{% url 'transactions_ajax_request' %}",
            data: function(data) {
                date_from = $('#min').datepicker({ dateFormat: 'dd.mm.yy' }).val();
                date_to = $('#max').datepicker({ dateFormat: 'dd.mm.yy' }).val();
                filter_key = "{{ filter_key }}";

                data.filter_key = filter_key;
                data.date_from = date_from;
                data.date_to = date_to;

            }
        }
    });

    $("#min").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });
    $("#max").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });


    $('#min, #max').change(function () {
        table.draw();
    });


});


</script>
